# Use PHP 8.1
AddHandler application/x-httpd-php81 .php

# Enable Rewrite Engine
RewriteEngine On

# Redirect to public folder (if Laravel is in the root folder)
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ /public/$1 [L]

# Serve files from the "storage/public" directory correctly
RewriteCond %{REQUEST_URI} ^/storage/(.*)
RewriteCond %{DOCUMENT_ROOT}/storage/app/public/$1 -f
RewriteRule ^storage/(.*)$ /storage/app/public/$1 [L]

# Handle Authorization Header
RewriteCond %{HTTP:Authorization} .
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

# Fallback for Laravel routes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]

# php -- BEGIN cPanel-generated handler, do not edit
# Set the “ea-php81” package as the default “PHP” programming language.
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit
